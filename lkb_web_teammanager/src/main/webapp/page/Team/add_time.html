<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<link rel="stylesheet" type="text/css" href="../../css/backstage.css">
	<link rel="stylesheet" href="../../css/bootstrap.css" />
	<!--<link rel="stylesheet" href="../css/layout.css" />-->
	<link rel="stylesheet" type="text/css" href="../../css/teacher.css" />
	<script type="text/javascript" src="../../js/jquery.min.js"></script>
	<script type="text/javascript" src="../../js/bootstrap.min.js"></script>
	<title></title>
	<style>

	</style>
	<script>
        $(function () {
            var availableTags;
            $.ajax({
                type: "get",
                url: " __MODULE__/Team/add_time",
                dataType: "json",
                success: function (data) {
                    $("#tags").autocomplete({
                        source: data
                    });
                    $("#team_name").autocomplete({
                        source: data
                    });
                },
                error: function (e) {
                    console.log(e);
                }
            });
        })
	</script>
</head>

<body>
<form action="" method="post" enctype="multipart/form-data" onsubmit="return dosubmit()" style="width: 600px;">
	<div style="padding: 10px 50px 20px 50px;">
		<h2 style="color: #0063a1;">选择期数</h2>
		<table class="table table-striped">
			<tr id="sel_time">
				<td align="right">
					选择期数
				</td>
				<td>
						<select class="form-control fl" style="width: 120px" id="" name="time"
								onchange="change(this.value)">
							<!--//当有更改的时候调用-->
							<foreach name="time.list" item="t">
								<option value="{$t.time}">{$t.time}</option>
							</foreach>
						</select>
				</td>
			</tr>
			<tr>
				<td colspan="2">
					<input class="btn btn-primary" type="submit" value="确定" />
					<input type="button" class="btn btn-primary" value="输入期数" onclick="add_input()">
				</td>

			</tr>

		</table>
	</div>
</form>
</body>
<footer style="margin-top: 100px;">

</footer>
</body>

</html>
<script>
    function getUrlParam() {
        var reg = new RegExp("success"); //构造一个含有目标参数的正则表达式对象
        var r = window.location.href.match(reg); //匹配目标参数
        if (r == 'success'){
            var index = parent.layer.getFrameIndex(window.name);
            window.parent.location.reload();
        }
    }
    window.getUrlParam();

    var isCommitted = false;//表单是否已经提交标识，默认为false
    function dosubmit() {
        if (isCommitted == false) {
            isCommitted = true;//提交表单后，将表单是否已经提交标识设置为true
            return true;//返回true让表单正常提交
        } else {
            return false;//返回false那么表单将不提交
        }
    }
    function add_input() {
    var data='<tr id="add_time"><td align="right">新增期数</td>';
        data+='<td>';
        data+='<input type="text"  style="width: 50%;float: left;margin:0 5px " name="time" class="form-control" id=""/>';
        data+='<input type="button" class="btn btn-primary" value="取消" id="remove" onclick="remove_input()">';
        data+='</td></tr>';
        $("#sel_time").before(data);
        $("#sel_time").remove();
    }
    function remove_input() {
        var data='<tr id="sel_time">';
        data+='<td align="right">选择期数</td>';
        data+='<td><select class="form-control fl" style="width: 120px" id="" name="time" onchange="change(this.value)">';

            data+='<foreach name="time.list" item="t">';
        data+='<option value="{$t.time}">{$t.time}</option>';
        data+='</foreach>';
        data+='</select>';
        data+='</td>';
        data+='</tr>';
        $("#add_time").after(data);
        $("#add_time").remove();
    }
</script>

