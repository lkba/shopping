<!DOCTYPE html>
<html xmlns:v-on="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8"/>
    <link rel="stylesheet" href="../../css/elementui.css">

    <link rel="stylesheet" href="../../css/bootstrap.css"/>
    <link rel="stylesheet" href="../../css/layout.css"/>
    <link rel="stylesheet" type="text/css" href="../../css/student.css"/>
    <script src="../../js/jquery.js"></script>
    <script src="../../js/layer.js"></script>
    <script type="text/javascript" src="../../js/jquery.min.js"></script>
    <script type="text/javascript" src="../../js/bootstrap.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="../../js/plugins/kindeditor/kindeditor.js"></script>
    <script type="text/javascript" charset="utf-8" src="../../js/plugins/kindeditor/lang/zh_CN.js"></script>
    <title></title>
    <script>
        KindEditor.ready(function (K) {
            window.editor = K.create('#editor_id');
        });
    </script>
    <style>
        body {
            padding: 20px 50px;
        }

        label {
            margin: 0 72px 0 10px;
            display: inline-block;
            vertical-align: middle;
        }

        input[type="radio"] {
            vertical-align: middle;
            margin: 0;
        }

        input[type="checkbox"] {
            vertical-align: middle;
            margin: 10px;
        }

        td {
            vertical-align: middle !important;
        }

        table th {
            vertical-align: middle !important;
            text-align: center;
            width: 200px;
            min-width: 100px;
        }

        textarea {
            resize: none;
            word-wrap: break-word;
            background: none;
            height: 100%;
            width: 100%;
            overflow: hidden;
        }
    </style>
</head>
<body>
<div id="app">
    <center><h1>创新创业学院创业孵化基地团队入驻表</h1></center>
    <form method="post" enctype="multipart/form-data">
        <table class="table table-bordered">
            <tr>
                <th colspan="1">团队名称</th>
                <td colspan="7"><textarea rows="2" maxlength="120" name="team" required="required"
                                          v-model="pojo.team"></textarea></td>
            </tr>
            <tr>
                <th colspan="1">项目名称</th>
                <td colspan="7"><textarea rows="2" maxlength="120" name="project" v-model="pojo.project"></textarea>
                </td>
            </tr>
            <tr>
                <th colspan="1">公司是否注册</th>
                <td colspan="1">
                    <select name="registered" id="registered" v-model="pojo.registered">
                        <option value="否">否</option>
                        <option value="是">是</option>
                    </select>
                </td>
                <th colspan="1">注册时间</th>
                <td colspan="2"><input type="date" name="reg_time" value="" id="reg_time" v-model="pojo.date"/></td>
                <th colspan="1">注册资金<br>（万元）</th>
                <td colspan="2"><textarea rows="2" maxlength="120" name="money" id="money"
                                          v-model="pojo.money"></textarea>
                </td>
            </tr>
            <tr>
                <th colspan="1">经营范围<br>（产品/服务）</th>
                <td colspan="7"><textarea rows="3" maxlength="150" name="business_scope"
                                          v-model="pojo.business_scope"></textarea></td>
            </tr>
            <tr>
                <th>行业类别</th>
                <td colspan="7">
                    <input type="radio" name="class_por" v-model="pojo.class_por" value="产品开发类" id="c"
                           style="margin-left: 72px;"/><label for="c">产品开发类</label>
                    <input type="radio" name="class_por" v-model="pojo.class_por" value="技术服务类" id="j"/><label for="j">技术服务类</label>
                    <input type="radio" name="class_por" v-model="pojo.class_por" value="商业服务类" id="s"/><label for="s">商业服务类</label>
                </td>
            </tr>
            <tr>
                <th>属性</th>
                <td colspan="7">
                    <select name="property" style="margin-left: 30px;" v-model="pojo.property">
                        <option value="1">专业创业</option>
                        <option value="2">软件开发与服务</option>
                        <option value="3">专业创业与软件开发与服务</option>
                    </select>
                </td>
            </tr>
            <tr>
                <th rowspan="5" colspan="1" id="teacher">项目指导教师</th>
            </tr>
            <!--            <foreach name="teacher" item="v">-->
            <tr>
                <th colspan="1"><input type="hidden" value="add" name="id[]" v-model="pojo.teacher[0].id"/>姓名&nbsp;<a
                        title="删除" href="javascript:;" onclick="teacher_del1(this)">X</a></th>
                <td colspan="2"><textarea rows="1" maxlength="120" name="name[]" v-model="pojo.teacher[0].name"
                                          required="required"></textarea></td>
                <th colspan="2">系别</th>
                <td colspan="2"><textarea rows="1" maxlength="120" name="department[]" required="required"
                                          v-model="pojo.teacher[0].department"></textarea></td>
            </tr>
            <tr>
                <th colspan="1">职务</th>
                <td colspan="2"><textarea rows="1" maxlength="120" name="position[]" required="required"
                                          v-model="pojo.teacher[0].position"></textarea></td>
                <th colspan="2">负责领域</th>
                <td colspan="2"><textarea rows="1" maxlength="120" name="field[]" required="required"
                                          v-model="pojo.teacher[0].field"></textarea></td>
            </tr>
            <tr>
                <th colspan="1"><input type="hidden" value="add" name="id[]" v-model="pojo.teacher[1].id"/>姓名&nbsp;<a title="删除" href="javascript:;" onclick="teacher_del1(this)">X</a></th>
                <td colspan="2"><textarea rows="1" maxlength="120" name="name[]" v-model="pojo.teacher[1].name" required="required"></textarea></td>
                <th colspan="2">系别</th>
                <td colspan="2"><textarea rows="1" maxlength="120" name="department[]" required="required"
                                          v-model="pojo.teacher[1].department"></textarea></td>
            </tr>
            <tr>
                <th colspan="1">职务</th>
                <td colspan="2"><textarea rows="1" maxlength="120" name="position[]" required="required"
                                          v-model="pojo.teacher[1].position"></textarea></td>
                <th colspan="2">负责领域</th>
                <td colspan="2"><textarea rows="1" maxlength="120" name="field[]" required="required"
                                          v-model="pojo.teacher[1].field"></textarea></td>
            </tr>
            <!--            </foreach>-->
            <tr id="tadd">
                <th colspan="1">操作</th>
                <td colspan="7">
                    <a href="javascript:;" class="file" onclick="teacher_add()" title="添加导师">添加指导教师</a>
                    &nbsp;&nbsp;&nbsp;
                    <a href="javascript:;" class="file">删除指导教师：点击姓名傍边的“X”，确认后即可删除！
                    </a>
                </td>
            </tr>


            <th rowspan="4" colspan="1">项目主创<br>团队人员<br>基本情况</th>
            <tr>
                <th colspan="1">负责人</th>
                <td colspan="2"><textarea rows="1" maxlength="120" name="fname" required="required"
                                          v-model="pojo.fname"></textarea></td>
                <th colspan="1">年龄</th>
                <td colspan="1" style="width: 180px;"><textarea rows="1" maxlength="120" name="fage"
                                                                v-model="pojo.fage"></textarea></td>
                <th colspan="1">性别</th>
                <td colspan="1">
                    <select name="fsex" v-model="pojo.fsex">
                        <option value="男">男</option>
                        <option value="女">女</option>
                    </select>
                </td>
            </tr>
            <tr>
                <th colspan="1">系别</th>
                <td colspan="2"><textarea rows="1" maxlength="120" name="fdepartment"
                                          v-model="pojo.fdepartment"></textarea>
                </td>
                <th colspan="2">专业班级</th>
                <td colspan="2"><textarea rows="1" maxlength="120" name="fprofessional"
                                          v-model="pojo.fprofessional"></textarea></td>
            </tr>
            <tr>
                <th colspan="1">手机号码</th>
                <td colspan="2"><textarea rows="1" maxlength="120" name="fphone" class="phone"
                                          v-model="pojo.fphone"></textarea></td>
                <th colspan="2">E-mail/QQ</th>
                <td colspan="2"><textarea rows="1" maxlength="120" name="femail" v-model="pojo.femail"></textarea></td>
            </tr>

            <tr>
                <th rowspan="3" colspan="1" id="teammate">核心团队成员信息（不超9个）</th>
                <th colspan="1">姓名</th>
                <th colspan="1">性别</th>
                <th colspan="1">系别</th>
                <th colspan="2">专业班级</th>
                <th colspan="1">手机号码</th>
                <th colspan="1">E-mail/QQ</th>
            </tr>

            <tr>
                <td colspan="1">
                    <a title="删除" href="javascript:;" onclick="team_del(this,id,'{$vv.name}')">X</a>&nbsp;&nbsp;
                    <textarea rows="1" maxlength="20" name="tname[]" style="width: 70%;"
                              v-model="pojo.teams[0].tname"></textarea>
                    <input type="hidden" value="add" name="mateid[]" v-model="pojo.teams[0].mateid"/>
                </td>
                <td colspan="1">
                    <select name="tsex[]" v-model="pojo.teams[0].tsex">
                        <option value="男">男</option>
                        <option value="女">女</option>
                    </select>
                </td>
                <td colspan="1"><textarea rows="1" maxlength="120" name="tdepartment[]"
                                          v-model="pojo.teams[0].tdepartment"></textarea>
                </td>
                <td colspan="2"><textarea rows="1" maxlength="120" name="tprofessional[]"
                                          v-model="pojo.teams[0].tprofessional"></textarea></td>
                <td colspan="1"><textarea rows="1" maxlength="120" name="tphone[]" v-model="pojo.teams[0].tphone"
                                          class="phone"></textarea></td>
                <td colspan="1"><textarea rows="1" maxlength="120" name="temail[]"
                                          v-model="pojo.teams[0].temail"></textarea></td>
            </tr>
            <tr>
                <td colspan="1">
                    <a title="删除" href="javascript:;" onclick="team_del(this,id,'{$vv.name}')">X</a>&nbsp;&nbsp;
                    <textarea rows="1" maxlength="20" name="tname[]" style="width: 70%;"
                              v-model="pojo.teams[1].tname"></textarea>
                    <input type="hidden" value="add" name="mateid[]" v-model="pojo.teams[1].mateid"/>
                </td>
                <td colspan="1">
                    <select name="tsex[]" v-model="pojo.teams[1].tsex">
                        <option value="男">男</option>
                        <option value="女">女</option>
                    </select>
                </td>
                <td colspan="1"><textarea rows="1" maxlength="120" name="tdepartment[]"
                                          v-model="pojo.teams[1].tdepartment"></textarea>
                </td>
                <td colspan="2"><textarea rows="1" maxlength="120" name="tprofessional[]"
                                          v-model="pojo.teams[1].tprofessional"></textarea></td>
                <td colspan="1"><textarea rows="1" maxlength="120" name="tphone[]" v-model="pojo.teams[1].tphone"
                                          class="phone"></textarea></td>
                <td colspan="1"><textarea rows="1" maxlength="120" name="temail[]"
                                          v-model="pojo.teams[1].temail"></textarea></td>
            </tr>
            <tr id="tmadd">
                <th colspan="1">操作</th>
                <td colspan="7">
                    <a href="javascript:;" class="file" onclick="team_add()" title="添加成员">添加成员</a>
                    &nbsp;&nbsp;&nbsp;
                    <a href="javascript:;" class="file">删除成员：点击“姓名”傍边的“X”，确认后即可删除！
                    </a>

                </td>
            </tr>

            <tr>
                <th colspan="1" rowspan="4">项目规模</th>
            </tr>
            <tr>
                <td colspan="1">启动资金</td>
                <td colspan="6"><textarea rows="1" cols="80" overflow="hidden" maxlength="150" name="qmoney"
                                          v-model="pojo.qmoney"></textarea>
                </td>
            </tr>
            <tr>
                <td colspan="1">办公场地</td>
                <td colspan="6">
                    <select name="areawork" v-model="pojo.areawork">
                        <option value="实践园">实践园</option>
                        <option value="创新创业学院">创新创业学院</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td colspan="1">员工人数
                </th>
                <td colspan="6"><textarea rows="1" cols="80" overflow="hidden" maxlength="150" name="persons"
                                          v-model="pojo.persons"></textarea>
                </td>
            </tr>


            <tr>
                <th colspan="1">企业形式</th>
                <td colspan="7">
                    <input type="radio" name="form" value="无限责任公司" id="wx" style="margin-left: 72px;"
                           v-model="pojo.form"/><label for="wx">无限责任公司</label>
                    <input type="radio" name="form" v-model="pojo.form" value="有限责任公司" id="yx"/><label
                        for="yx">有限责任公司</label>
                    <input type="radio" name="form" v-model="pojo.form" value="股份有限公司" id="gf"/><label
                        for="gf">股份有限公司</label><br>
                    <input type="radio" name="form" v-model="pojo.form" value="个人独资企业" id="gr"
                           style="margin-left: 72px;"/><label for="gr">个人独资企业</label>
                    <input type="radio" name="form" v-model="pojo.form" value="合伙企业" id="hh"/><label for="hh"
                                                                                                     style="width: 84px;">合伙企业</label>
                    <input type="radio" name="form" v-model="pojo.form" value="公司制企业" id="gs"/><label
                        for="gs">公司制企业</label><br>
                    <input type="radio" id="other" v-model="pojo.form" name="form" value="{$enter[0].form}"
                           style="margin-left: 72px;"/><label for="other"
                                                              style="margin: 0 0 0 10px;">其他</label>（请填写）<input
                        type="text" onfocus="other.checked=true" v-model="pojo.form" onblur="other.value=this.value"
                        style="border-bottom: 1px solid #000000;" value="{$enter[0].form}" id="txt"/>
                </td>
            </tr>
            <tr>
                <th colspan="1">
                    项目基本思路（可附思维导图）
                </th>
                <td colspan="7">
                    <textarea overflow="hidden" name="thinking" id="editor_id" style="width:100%;height:350px;"
                              id="thinking" v-model="pojo.thinking"></textarea>
                </td>
            </tr>

            <tr>
                <th colspan="1">
                    项目预期效果（包括社会效益和经济效益）
                </th>
                <td colspan="7"><textarea rows="3" cols="80" v-model="pojo.effect" style="overflow-y:scroll"
                                          name="effect"></textarea>
                </td>
            </tr>
            <tr>
                <th colspan="1">
                    项目简介（300字以内）
                </th>
                <td colspan="7"><textarea rows="5" cols="80" v-model="pojo.abstract" name="abstract"
                                          style="overflow-y:scroll"></textarea>
                </td>
            </tr>

            <tr>
                <th colspan="1">
                    项目特色（200字以内）
                </th>
                <td colspan="7"><textarea rows="4" cols="80" style="overflow-y:scroll" name="character"
                                          v-model="pojo.character"></textarea>
                </td>
            </tr>

            <tr>
                <th colspan="1">
                    项目可行性简述（技术保障、市场容量、团队能力支持、资金来源、发展方向，600字以内）
                </th>
                <td colspan="7"><textarea rows="8" cols="80" style="overflow-y:scroll" name="feasibility"
                                          v-model="pojo.feasibility"></textarea>
                </td>
            </tr>

            <tr>
                <th colspan="1">
                    其他说明（300字以内）
                </th>
                <td colspan="7"><textarea rows="4" cols="80" style="overflow-y:scroll" name="explain"
                                          v-model="pojo.explain"></textarea>
                </td>
            </tr>

            <tr>
                <th colspan="1">
                    创业计划书
                </th>

                <td colspan="7">
                    <span class="file" title="上传计划书">
                        <el-upload
                                class="avatar-uploader"
                                action="/upload/native.do"
                                :show-file-list="false"
                                :on-success="handleAvatarSuccess"
                                :before-upload="beforeAvatarUpload">
                            <img v-if="fileUrl" :src="fileUrl" class="avatar">
                            <i v-else class="el-icon-plus avatar-uploader-icon"></i>
                        </el-upload>
                    </span>
                    <span style="position: relative;top: -8px;">将创业计划书丶资料等文件压缩上传，上传仅限zip,rar的压缩格式</span>
                    <div class="showFileName1"></div>
                    <div class="fileerrorTip1"></div>
                </td>
            </tr>

            <tr height="150px">
                <th colspan="1">
                    创业团队负责人所在系意见（系党总支盖章）
                </th>
                <td colspan="7" style="position: relative;">

                    <div style="position: absolute;bottom: 30px;right: 100px;">（盖章）</div>
                    <div style="position: absolute;bottom: 5px;right: 50px;">&nbsp;&nbsp;&nbsp;&nbsp;年&nbsp;&nbsp;&nbsp;&nbsp;月&nbsp;&nbsp;&nbsp;&nbsp;日</div>
                </td>
            </tr>

            <tr id="sel_time">
                <th colspan="1">
                    选择期数
                </th>
                <td colspan="7">
                    <select class="form-control fl" style="width: 120px" id="time" name="time"
                            onchange="change(this.value)" v-model="pojo.time">
                        <!--//当有更改的时候调用-->
                        <template v-for="time_qs in times">
                            <option :value="time_qs.time">{{time_qs.time}}</option>
                        </template>
                    </select>
                </td>
            </tr>

        </table>
        <div>
            备注： 申请表和商业计划书需上交打印稿和电子稿，申请表和创业计划书分开装订，A4纸双面打印，于左侧双颗钉装订成册，各一份。
        </div>
        <button type="button" class="btn btn-info" style="float: right;margin-left: 20px;margin-bottom: 50px;"
                onclick="back()">返回
        </button>
        <button type="reset" class="btn btn-info" style="float: right;margin-left: 20px;">重置</button>
        <button type="button" class="btn btn-info" style="float: right;margin-left: 20px;" id="sub" v-on:click="save()">
            保存
        </button>
        <button type="button" class="btn btn-info" style="float: right;margin-left: 20px;margin-bottom: 50px;"
                onclick="add_input()">输入期数
        </button>
    </form>
</div>
</body>
</html>
<script>
    function back() {
        var index = parent.layer.getFrameIndex(window.name); //先得到当前iframe层的索引
        parent.layer.close(index); //再执行关闭
    }

    function getUrlParam() {
        var reg = new RegExp("success"); //构造一个含有目标参数的正则表达式对象
        var r = window.location.href.match(reg); //匹配目标参数
        if (r == 'success') {
            var index = parent.layer.getFrameIndex(window.name);
            window.parent.location.reload();
        }
    }

    window.getUrlParam();

    //
    //计算添加导师的编号
    var teacher_num = 0;

    function teacher_del1(obj) {
        layer.confirm('确认要删除吗？', {icon: 3, title: "是否删除?"}, function (index) {
            $(obj).parents("tr").next().remove();
            $(obj).parents("tr").remove();
            if (teacher_num != 0) {
                teacher_num = teacher_num - 1;
            }
            var n = $("#teacher").attr("rowspan");
            $("#teacher").attr('rowspan', n - 2);
            layer.msg('已删除!', {icon: 1, time: 1000, title: "确认"});

        });
    }

    //
    function teacher_del(obj, id, name) {
        layer.confirm('确认要删除吗？', {icon: 3, title: "是否删除?"}, function (index) {
            $.get("__CONTROLLER__/teacherdel", {id: id}, function (msg) {
                if (msg.flag === true) {
                    $(obj).parents("tr").next().remove();
                    $(obj).parents("tr").remove();
                    if (teacher_num != 0) {
                        teacher_num = teacher_num - 1;
                    }
                    var n = $("#teacher").attr("rowspan");
                    $("#teacher").attr('rowspan', n - 2);
                    layer.msg('已删除!', {icon: 1, time: 1000, title: "确认"});
                    //location.reload();

                } else {
                    alert(msg.msg);
                }
            }, "json");
        });
    }


    // '+teacher_num+'
    //添加导师
    function teacher_add() {
        var data = '<tr>';
        data += '<th colspan="1"><input type="hidden" value="add" name="id[]" v-model="pojo.teacher[' + teacher_num + '].id"/>姓名&nbsp;<a title="删除" href="javascript:;" onclick="teacher_del1(this)" >X</a></th><td colspan="2"><textarea rows="1" maxlength="120" name="name[]" v-model="pojo.teacher[' + teacher_num + '].name"  required="required"></textarea></td>';
        data += '<th colspan="2">系别</th><td colspan="2"><textarea rows="1" maxlength="120" name="department[]" required="required" v-model="pojo.teacher[' + teacher_num + '].department"></textarea></td></tr>';
        data += '<tr>';
        data += '<th colspan="1">职务</th><td colspan="2"><textarea rows="1" maxlength="120" name="position[]" required="required" v-model="pojo.teacher[' + teacher_num + '].position"></textarea></td>';
        data += '<th colspan="2">负责领域</th><td colspan="2"><textarea rows="1" maxlength="120" name="field[]" required="required" v-model="pojo.teacher[' + teacher_num + '].field"></textarea></td>';
        data += '</tr>';
        teacher_num = teacher_num + 1;
        var n = $("#teacher").attr("rowspan");
        $("#teacher").attr('rowspan', parseInt(n) + 2);
        console.log(data)
        $('#tadd').before(data);
        // $('#tadd').html(data);

    }

    var teams_num = 1;

    //
    function team_del1(obj) {
        layer.confirm('确认要删除吗？', {icon: 3, title: "是否删除?"}, function (index) {
            $(obj).parents("tr").remove();
            var n = $("#teamsmate").attr("rowspan");
            $("#teamsmate").attr('rowspan', n - 1);
            if (teams_num != 0) {
                teams_num = teams_num - 1;
            }
            layer.msg('已删除!', {icon: 1, time: 1000, title: "确认"});
        });
    }

    //
    function team_del(obj, id, name) {
        layer.confirm('确认要删除吗？', {icon: 3, title: "是否删除?"}, function (index) {
            $.get("__CONTROLLER__/teamsdel", {id: id}, function (msg) {
                if (msg.flag === true) {
                    $(obj).parents("tr").remove();
                    var n = $("#teammate").attr("rowspan");
                    $("#teammate").attr('rowspan', n - 1);
                    if (teams_num != 0) {
                        teams_num = teams_num - 1;
                    }
                    layer.msg('已删除!', {icon: 1, time: 1000, title: "确认"});
                    //location.reload();

                } else {
                    alert(msg.msg);
                }
            }, "json");
        });
    }

    //添加成员
    function team_add() {
        var data = '<tr><td colspan="1">';
        data += '<a title="删除" href="javascript:;" onclick="team_del1(this)" >X</a>&nbsp;&nbsp;';
        data += '<textarea rows="1" maxlength="20" name="tname[]" v-model="pojo.teams[' + teams_num + '].tname" style="width: 70%;" required="required"></textarea><input type="hidden" value="add" name="mateid[]" v-model="pojo.teams[' + teams_num + '].mateid"/>';
        data += '</td>';
        data += '<td colspan="1">';
        data += '<select name="tsex[]" v-model="pojo.teams[' + teams_num + '].tsex">';
        data += '<option value="男" selected>男</option>';
        data += '<option value="女" >女</option>';
        data += '</select>';
        data += '</td>';
        data += '<td colspan="1"><textarea rows="1" maxlength="120" name="tdepartment[]" v-model="pojo.teams[' + teams_num + '].tdepartment" required="required"></textarea></td>';
        data += '<td colspan="2"><textarea rows="1" maxlength="120" name="tprofessional[]" v-model="pojo.teams[' + teams_num + '].tprofessional" required="required"></textarea></td>';
        data += '<td colspan="1"><textarea rows="1" maxlength="120" name="tphone[]" v-model="pojo.teams[' + teams_num + '].tphone" class="phone" required="required"></textarea></td>';
        data += '<td colspan="1"><textarea rows="1" maxlength="120" name="temail[]" v-model="pojo.teams[' + teams_num + '].temail"></textarea></td>';
        data += '</tr>';
        if (teacher_num != 0) {
            teams_num = teams_num - 1;
        }
        var n = $("#teammate").attr("rowspan");
        $("#teammate").attr('rowspan', parseInt(n) + 1);
        $('#tmadd').before(data);
    }

    //上传
    function upload(title, url, w, h) {
        layer.open({
            type: 2,
            title: title,
            shadeClose: true,
            shade: 0.4,
            area: [w, h],
            content: url //iframe的url
        });
    }

    $(function () {
        var x = $('input:radio[name="form"]:checked').val();
        if (x != "无限责任公司" && x != "有限责任公司" && x != "份有限公司" && x != "个人独资企业" && x != "合伙企业" && x != "公司制企业") {
            $('#other').attr('checked', 2);
            $('#txt').show();
        } else {
            $('#txt').hide();
        }
    });


    $('#other').click(function () {
        $('#txt').show();
    });
    $("form").submit(function () { //表单提交时判断

        if ($('#registered').val() == '是') {
            if ($('#reg_time').val().trim().length == 0) {
                $("#reg_time").focus();
                return false;
            }
        }
        if ($("#other").is(":checked") && $("#txt").val().trim().length == 0) {
            $("#txt").val('无');
        }
        var f1 = true;
        $(".phone").each(function () {
            var f2 = checkPhone($(this).val().trim());
            if (f2 == false) {
                $(this).val($(this).val().trim());
                alert('手机号码格式错误！');
                $(this).focus();
                f1 = false;
                return false;
            }
        });
        if (f1 == false) {
            return f1;
        } else {
            $("#sub").attr('disabled', 'disabled');
        }
    });

    function checkPhone(phone) {
        if (!(/^1(3|4|5|7|8)\d{9}$/.test(phone))) {
            //alert("手机号码有误!");
            return false;
        }
    }

    $("#registered").change(function () {
        if ($('#registered').val() == '否') {
            $('#reg_time').hide();
            $('#reg_time').val('');
            $('#money').val('');
            $('#money').hide();
        } else {
            $('#reg_time').show();
            $('#money').show();
        }
    });
    $(function () {
        if ($('#registered').val() == '否') {
            $('#reg_time').hide();
            $('#reg_time').val('');
            $('#money').val('');
            $('#money').hide();
        } else {
            $('#reg_time').show();
            $('#money').show();
        }
    });
    $(".file").on("change", "input[type='file']", function () {
        var filePath = $(this).val();
        if (filePath.indexOf("zip") != -1 || filePath.indexOf("rar") != -1) {
            $(".fileerrorTip1").html("").hide();
            var arr = filePath.split('\\');
            var fileName = arr[arr.length - 1];
            $(".showFileName1").html(fileName);
        }
//        else {
//            $(".showFileName1").html("");
//            $(".fileerrorTip1").html("您未上传文件，或者您上传文件类型有误！").show();
//            return false
//        }
    })

    function add_input() {
        var data = '<tr id="add_time"><td align="right" colspan="1">新增期数</td>';
        data += '<td colspan="7">';
        data += '<input type="text"  style="width: 50%;float: left;margin:0 5px " name="time" v-model="pojo.time" class="form-control" id="time"/>';
        data += '<input type="button" class="btn btn-info" value="取消" id="remove" onclick="remove_input()">';
        data += '</td></tr>';
        $("#sel_time").before(data);
        $("#sel_time").remove();

    }

    function remove_input() {
        var data = '<tr id="sel_time">';
        data += '<td align="right" colspan="1">选择期数</td>';
        data += '<td colspan="7"><select class="form-control fl" style="width: 120px" id="time" name="time" v-model="pojo.time" onchange="change(this.value)">';
        data += '<foreach name="time.list" item="t">';
        data += '<option value="{$t.time}">{$t.time}</option>';
        data += '</foreach>';
        data += '</select>';
        data += '</td>';
        data += '</tr>';
        $("#add_time").after(data);
        $("#add_time").remove();
    }
</script>

<script src="../../js/vue.js"></script>
<script src="../../js/axios.js"></script>
<script src="../../js/util.js"></script>
<script src="../../js/elementui.js"></script>
<script>
    new Vue({
        el: '#app',
        data() {
            return {
                tableData: [],
                enter: [],
                user: {},
                basics: [],
                team: [],
                teachers: [],
                len: "",
                len2: "",
                times: "",
                tid: null,
                currentPage: 1,
                total: 10,
                size: 10,
                searchMap: {},
                pojo: {
                    teams: [{"mateid": "add"}, {"mateid": "add"}, {"mateid": "add"}, {"mateid": "add"}],
                    teacher: [{"id": "add"}, {"id": "add"}, {"id": "add"}, {"id": "add"}],
                },
                formVisible: false,
                fileUrl: ''
            }
        },
        created() {
            this.tid = getQueryString("tid")
            this.searchMap = {tid: getQueryString("tid")}
            this.fetchData();
        },
        methods: {
            fetchData() {
                axios.get(`http://localhost:9105/enterTime/findAll.do`).then(response => {
                    this.times = response.data;
                });
            },

            save() {
                this.pojo.prospectus = this.fileUrl; //如页面有图片上传功能放开注释
                // layer.confirm('确认要添加吗？', {icon: 3, title: "是否保存?"}, function (index) {

                axios.post(`http://localhost:9105/user/input_team.do`, this.pojo).then(response => {
                    console.log(response.data)
                    if (response.data.flag) {
                        //提示层
                        layer.msg('添加成功');
                        var index = parent.layer.getFrameIndex(window.name);
                        window.parent.location.reload();
                    } else {
                        layer.msg('添加失败');
                    }
                });
                // layer.close(index);

                // });
            },
            // edit(id) {
            //     this.formVisible = true // 打开窗口
            //     // 调用查询
            //     axios.get(`/order/findById.do?id=${id}`).then(response => {
            //         this.pojo = response.data;
            //         // this.fileUrl=this.pojo.image //显示图片  如页面有图片上传功能放开注释
            //     })
            // },
            // dele(id) {
            //     this.$confirm('确定要删除此记录吗?', '提示', {
            //         confirmButtonText: '确定',
            //         cancelButtonText: '取消',
            //         type: 'warning'
            //     }).then(() => {
            //         axios.get(`/order/delete.do?id=${id}`).then(response => {
            //             this.fetchData(); //刷新列表
            //         })
            //     })
            // },
            /* ****图片上传相关代码  如页面有图片上传功能放开注释 *****/
            handleAvatarSuccess(res, file) {
                this.fileUrl = file.response;
                console.log(this.fileUrl)
            },
            beforeAvatarUpload(file) {
                // const isJPG = file.type === 'docx/doc';
                const isLt2M = file.size / 1024 / 1024 < 2;

                // if (!isJPG) {
                //     this.$message.error('上传头像图片只能是 docx/doc 格式!');
                // }
                if (!isLt2M) {
                    this.$message.error('上传头像图片大小不能超过 2MB!');
                }
                // return isJPG && isLt2M;
                return isLt2M;
            }
        }
    })
</script>


<style>
    /*样式2*/
    .file {
        position: relative;
        display: inline-block;
        background: #D0EEFF;
        border: 1px solid #99D3F5;
        border-radius: 4px;
        padding: 4px 12px;
        overflow: hidden;
        color: #1E88C7;
        text-decoration: none;
        text-indent: 0;
        line-height: 20px;
    }

    .file input {
        position: absolute;
        font-size: 100px;
        right: 0;
        top: 0;
        opacity: 0;
    }

    .file:hover {
        background: #AADFFD;
        border-color: #78C3F3;
        color: #004974;
        text-decoration: none;
    }
</style>
